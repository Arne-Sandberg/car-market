{% extends 'index.html' %}
{% load bootstrap %}
{% load static %}
{% block content %}
    {% if flag == 'not_authenticated' %}
        <div align="center">
            <h3>You have no rights to do this action.</h3>
            <p>In order to proceed you have to
                <a href="{% url 'login' %}">log in</a> or
                <a href="{% url 'register' %}">sign up</a>.
            </p>
        </div>
    {% elif flag == 'stripe_success' %}
        <div align="center">
            <h3>Your stripe account was successfully connected.</h3>
            <p>To proceed press
                <a href="{% url 'profile' request.user %}">here</a>.
            </p>
        </div>
    {% elif flag == 'stripe_error' %}
        <div align="center">
            <h3>Something went wrong connecting your stripe account.</h3>
            <p>To get back to your profile press
                <a href="{% url 'profile' request.user %}">here</a>. To try again press
                <a href="https://connect.stripe.com/oauth/authorize?response_type=code&client_id=ca_DQaOCFCjDd2o48wUjD5fLPQlm6vkG51j&scope=read_write">
                    here</a>.
            </p>
        </div>
    {% elif flag == 'profile' %}
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="preview mb-3">
                {{ form.image|bootstrap }}
                <img id="preview_image" class="profile_img rounded"
                        {% if form.image.value %} src="{{ form.image.value.url }}"
                        {% else %} src="{% static 'images/default_user.png' %}"
                        {% endif %}>
            </div>
            {{ form.first_name|bootstrap }}
            {{ form.last_name|bootstrap }}
            {{ form.email|bootstrap }}
            <button type="submit" class="btn btn-primary">Save</button>
            <a href="{% url 'profile' request.user %}" class="btn btn-primary">Cancel</a>
        </form>
    {% elif flag == 'password' %}
        <form method="post">
            {% csrf_token %}
            {{ form|bootstrap }}
            <button type="submit" class="btn btn-primary">Save</button>
            <a href="{% url 'profile' request.user %}" class="btn btn-primary">Cancel</a>
        </form>
    {% endif %}
{% endblock %}